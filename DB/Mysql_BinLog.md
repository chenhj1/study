# Binlog

Binlog是mysql记录“操作记录”的二进制日志，记录了mysql的所有变动。
因为是二进制格式的日志，可能是binaryLog的缩写。

binlog可以用来查看数据库变更历史、备份数据、恢复数据、主从同步。

## 格式
### Statment
记录每一条修改数据的`sql`。   
**优点：**
不需要具体到某一行的具体改动内容，只需要记录sql命令，所以不会有很庞大的日志量，比较节省磁盘和IO   
**缺点：**
由于保存的是sql命令，为了保证能正确执行，还需要保存一些上下文信息。以保证再执行一遍时
能得到相同结果。另外涉及到mysql的复制，一些特定函数在master和slave上执行会有很多相关问题。

### Row
记录每一行改动内容。
**优点：**
由于记录具体到某一行，所以不需要存上下文信息。也不存在特定函数执行不对的问题。
**缺点：**
涉及到where批量更新或者alter table，记录会非常庞大。

### Mixed
Mixed模式是Statment与Row模式的结合，一般的语句使用Statment模式记录binlog，涉及到statment无法完成的
主从操作，如一些函数时，采用Row模式。

#### 注：
* Statment日志量不一定就比Row小。Row模式的日志量大是因为涉及到批量修改。单条记录的话Row模式日志比较小。
* 新版的Mysql对Row模式做了优化，涉及到表结构的改动以Statment模式来记录binlog